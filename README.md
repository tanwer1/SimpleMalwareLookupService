# Simple Malware Lookup Service

## Table of Contents

Problem Statement
   - The top level objective.
Objectives to be met/ SLA
General approach to the problem
System Interface.
Load calculations
Data models
Bottlenecks and suggestion
Security aspect
Telemetry

### Problem statement:
Malware URL lookup service

We have an HTTP proxy that is scanning traffic, looking for malware URLs. Before allowing HTTP connections to be made, this proxy asks a service that maintains several databases of malware URLs if the resource being requested is known to contain malware.

Write a small web service, preferably in Go or Python, that responds to GET requests where the caller passes in a URL and the service responds with some information about that URL. The GET requests would look like this:

GET /v1/urlinfo/{resource_url_with_query_string}

The caller wants to know if it is safe to access that URL or not. As the implementer, you get to choose the authorization, response format and structure. Please document the API in the README. These lookups are blocking users from accessing the URL until the caller receives a response from your service.

Give some thought to the following. Write-up the design, if you do not have time to code.

The size of the URL list could grow infinitely, how might you scale this beyond the memory capacity of the system? Bonus if you implement this.
The number of requests may exceed the capacity of this system, how might you solve that? Bonus if you implement this.
What are some strategies you might use to update the service with new URLs? Updates may be as many as 5000 URLs a day with updates arriving every 10 minutes.


### Objectives to be met/ SLA
The service sits as a helper service the http proxy, http proxy should be fast and user should not notice the delay or service failures.

Functional requirement: 
1. Get method to check if the resource url is a safe url or not.
2. Add/remove a bad url to the system.

Non-fucntional requirements: 
1. The response of the URL lookup service should be fast (say response time of : 100 ms).
2. The service is up 999.99 percent of the time.


### General approach to the problem 

As a simple approach for this malware lookup service is to have a server which accepts the requests, looks up in its data store and returns information indicating whether safe or unsafe.
Also one should be able to call endpoint to update/remove the db with the new url info.

client ---->      ***********
       <-----     | Malware |
AdminClient ----> | Service |
            <---- *********** 

Client comes to check the validity of url.
AdminClient comes with the add/remove a url or a set of url.

### System Interface.
The Syetem APIs exposed are as:
1. urlInfo(userInfo, resource_url_with_query_string)  returns a json e.g: {"status": 200, "isSafe": True}. 
   userInfo: username/passwd information.
   resource_url_with_query_string : the url query strings safety to be checked.
2. addUrl(adminUser, resource_url) returns a json e.g: {"status": 200 }
3. removeUrl(adminUser, resource_url) returns a json e.g: {"status": 200 }

### Load calculations

### Data models
### Bottlenecks and suggestion
### Security aspect
### Telemetry

### Future enhancements:
1. If the service become very popular and we can make the service multitenant.
2. The service can implement throttling if there are a lot of users and some users comes very often.
3. 
