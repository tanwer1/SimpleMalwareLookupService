#! /bin/bash


# add unsafe urls by calling the endpoint.
echo "adding Unsafe url: https://somerandomsite.com , https://www.abccc.com/resources?signature=abcdefetc"

curl --user user1:YehN4cus5dPx3yDz -k -X POST http://127.0.0.1:8000/v1/addurl --header "Content-Type: application/json"   -d "{\"resources\": [\"https://somerandomsite.com\", \"https://www.abccc.com/resources?signature=abcdefetc\"]}"  -v

echo "Is safe ? https://somerandomsite.com : should be false"
curl --user user1:YehN4cus5dPx3yDz -k  -X GET http://127.0.0.1:8000/v1/urlinfo/https://somerandomsite.com


echo "Is safe ? https://www.abccc.com/resources?signature=abcdefetc should be false"
curl --user user1:YehN4cus5dPx3yDz -k  -X GET http://127.0.0.1:8000/v1/urlinfo/https://www.abccc.com/resources?signature=abcdefetc


echo "Is safe ? https://somerandomsite.com/safe should be true"
curl --user user1:YehN4cus5dPx3yDz -k  -X GET http://127.0.0.1:8000/v1/urlinfo/https://somerandomsite.com/safe
