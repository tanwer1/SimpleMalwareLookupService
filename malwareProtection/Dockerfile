FROM python:3

# make homedir

RUN mkdir -p /home/setup /home/setup/src

COPY requirements.txt /home/setup
RUN pip install -r /home/setup/requirements.txt  \
    && cd /home/setup \
    && wget http://download.redis.io/redis-stable.tar.gz \
    && tar xzvf redis-stable.tar.gz \
    && cd /home/setup/redis-stable \
    && make 

COPY run_docker.sh /home/setup
COPY src  /home/setup

# expose port 80
EXPOSE 80

WORKDIR /home/setup
CMD ["/home/setup/run_docker.sh"]
